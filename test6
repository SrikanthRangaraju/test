import java.io.*;
import java.util.*;
import java.nio.file.*;

public class CommonIdsFinder {
    public static void main(String[] args) {
        // File paths
        String masterFilePath = "master.txt";
        String childFilePath = "child.txt";
        String outputFilePath = "updatedfile.txt";

        // Use a Set to store IDs for efficient lookup
        Set<String> masterIds = new HashSet<>();
        Set<String> commonIds = new HashSet<>();

        try {
            // Read master.txt
            List<String> masterLines = Files.readAllLines(Paths.get(masterFilePath));
            masterIds.addAll(masterLines);

            // Read child.txt and find common IDs
            List<String> childLines = Files.readAllLines(Paths.get(childFilePath));
            for (String id : childLines) {
                if (masterIds.contains(id)) {
                    commonIds.add(id);
                }
            }

            // Write common IDs to updatedfile.txt
            Files.write(Paths.get(outputFilePath), commonIds);

            System.out.println("Common IDs have been written to " + outputFilePath);

        } catch (IOException e) {
            System.err.println("An error occurred: " + e.getMessage());
        }
    }
}
