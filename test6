#!/bin/bash

# Define source and destination folders
source_folder="/tmp/test/RutResponse"
destination_folder="/tmp/test/updatedfolder"

# Ensure the destination folder exists
mkdir -p "$destination_folder"

# Process each JSON file in the source folder
find "$source_folder" -type f -name "*.json" | while read -r file; do
  # Get the filename without the path
  filename=$(basename "$file")

  # Process the file: remove first and last lines and replace "response": { with {
  sed '1d;$d;s/"response": {/ {/' "$file" > "$destination_folder/$filename"
done

echo "Processing complete. Updated files saved to $destination_folder"
